{% extends "base.html" %}

{% block title %}{% endblock title %}

{% block body %}

<!-- Page -->
<div class="panel panel-primary">

  <div class="panel-heading">

    <div class="row">
        <div class="col-lg-12">
            <div class="text-heading">Churn</div>
        </div>
    </div>

  </div>

  <div class="panel-body">

  <div class="row">
    <div class="col-lg-4">

        <table width="100%" class="table table-striped table-hover">
          <thead>
            <tr>
              <th>Mes</th>
              <th align="center">Vendidos</th>
              <th align="center">En Baja</th>
            </tr>
          </thead>
          <tbody>
            {% for item in data %}
              <tr>
                <td>{{item['mes']}}</td>
                <td align="center">{{item['deals_vend']}}</td>
                <td align="center" style="color: {{colors[2]}};">{{item['deals_en_baja']}}</td>
              </tr>
            {% endfor %}
            <tr>
              <td><strong>Total</strong></td>
              {% for tot in totales %}
                <td align="center"><strong>{{tot}}</strong></td>
              {% endfor %}
            </tr>
          </tbody>
        </table>
    
    </div>

    <div class="col-lg-8">
      <div id="churn_stats" style="height: 250px;"></div>
    </div>

  </div>

  </div>

</div>


<!-- Page -->

{% endblock body %}


{% block scripts %}

  <script>

    new Morris.Area({
      element: 'churn_stats',
      data: [{% for item in data %}
                { mes:"{{item['mes']}}", 
                  deals_vend:{{item['deals_vend']}},
                  deals_en_baja:{{item['deals_en_baja']}} },
             {% endfor %}],
      xkey: 'mes',
      ykeys: ['deals_vend','deals_en_baja'],
      labels: ['Vendidos','Baja'],
      hideHover: 'auto',
      barColors: ['{{colors[0]}}', '{{colors[2]}}'],
      stacked: true,
      xLabelAngle: 0
    });

  </script>

{% endblock scripts %}

